<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
  var kv = ["routerAddr","routeType","routeTypeVal","routeBindingPort","appName"];
  var tabs = ["home","settings","dashboard","input"];

  var activeTab = "home";

  $(document).ready(function() {
    $('#homeDiv').load('/home.md');
    console.log("Loaded /home.md.");
  });

  function init() {
    // clear cookies
    for (i = 0; i < kv.length; i++) {
      createCookie(kv[i],"",-1);
    }
    console.log("Cleared cookies.");

    //clickTab(document.getElementById(activeTab));
  }

  function createCookie(name,value,days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));

    var expires = "; expires="+date.toGMTString();

    document.cookie = name+"="+value+expires+"; path=/";
  }

  function saveChanges() {
    for (i = 0; i < kv.length; i++) {
      createCookie(kv[i],document.getElementById(kv[i]).value,1);
    }

    line = document.getElementById("inputTextarea").value;
    lines = line.split("\n");
    for (var i = 0; i < lines.length; i++) {
      if (lines[i] != "") {
        url = document.getElementById('routerAddr').value + lines[i];
        document.getElementById('win1').src = url;
      }
    }
  }

  function clickTab(obj) {
    if (activeTab != obj.id) {
      activeTab = obj.id;

      for (i = 0; i < tabs.length; i++) {
        divName = tabs[i] + "Div";
        if (tabs[i] == activeTab) {
          dispVal = "inline";
	} else {
          dispVal = "none";
	}
        document.getElementById(divName).style.display = dispVal;
      }
    }
  }
</script>
<style>
  body {
    font-family: "Arial", sans-serif;
  }
  input, select {
    font-size: 12pt;
  }
</style>
</head>
<body onload="init();">

<!-- HEADER -->
<img height=40 src="/img/logo.png"/>
<p/><p/>
<div name=header>
  <span id=home onclick="clickTab(this);" onmouseover="" style="cursor: pointer;">Home</span>&nbsp;|&nbsp;
  <span id=settings onclick="clickTab(this);" onmouseover="" style="cursor: pointer;">Settings</span>&nbsp;|&nbsp;
  <span id=dashboard onclick="clickTab(this);" onmouseover="" style="cursor: pointer;">Dashboard</span>&nbsp;|&nbsp;
  <span id=input onclick="clickTab(this);" onmouseover="" style="cursor: pointer;">Input</span>
</div>
<p/><p/>

<!-- HOME TAB -->
<div id=homeDiv style="display:inline;">
</div>

<!-- SETTINGS TAB -->
<div id=settingsDiv style="display:none;">
<table border=0 cellpadding=5 cellspacing=4>
<tr><td>App Name:</td><td><input id=appName type=text value="demo"/></td></tr>
<tr><td>Router Address:</td><td><input id=routerAddr type=text value="http://localhost:8080"/></td></tr>
<tr><td>Route Type:</td><td><select id=routeType><option value="URL">URL</option><option value="ManagedContainer">Managed Container</option></td></tr>
<tr><td>Route Type Value:</td><td><input id=routeTypeVal type=text value=""/></td></tr>
<tr><td>Route Binding Port:</td><td><input id=routeBindingPort type=text value="8080"/></td></tr>
</table>
<input type=button onclick="saveChanges();" value="Save Changes"/>
<p/>
<iframe id=win1 width=800 height=600></iframe>
</div>

<!-- INPUT TAB -->
<div id=inputDiv style="display:none;">
<textarea id=inputTextarea rows=4 cols=50>
/
</textarea>
</div>

<!-- DASHBOARD TAB -->
<div id=dashboardDiv style="display:none;">
Chart 1<p/>
Chart 2<p/>
<!-- <iframe src="http://192.168.84.130:5601/app/kibana#/visualize/edit/all-logs?embed=true&_g=(refreshInterval:(display:'10%20seconds',pause:!f,section:1,value:10000),time:(from:now-15m,mode:quick,to:now))&_a=(filters:!(),linked:!f,query:(query_string:(analyze_wildcard:!t,query:'*')),uiState:(),vis:(aggs:!((id:'1',params:(),schema:metric,type:count),(id:'2',params:(customInterval:'2h',extended_bounds:(),field:'@timestamp',interval:auto,min_doc_count:1),schema:segment,type:date_histogram)),listeners:(),params:(addLegend:!t,addTimeMarker:!f,addTooltip:!t,defaultYExtents:!f,mode:stacked,scale:linear,setYExtents:!f,shareYAxis:!t,times:!(),yAxis:()),title:'all%20logs',type:histogram))" height="600" width="800"></iframe> -->
</div>

<div id=outputDiv style="display:none;">
</div>

</body>
</html>
